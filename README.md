**最终报告和代码的说明（2025年春季）**  
总分：100%  
截止日期：2025年6月19日23:59（周四晚上）  
您的报告可以用英文或中文撰写。

1. 总体要求：
   a. 您需要将您所做的所有代码整合成一个完整且可工作的编译器，并撰写一份关于您所构建编译器的报告。具体要求如下。
   b. 您报告的目标读者是像您这样的计算机科学学生，但在上这门课之前，目标是让他/她能够理解您的整个编译器代码组织，而不会太困难（因此报告更像是一份非常详细的代码文档，并附有解释）。
   c. 您应该将您的编译器代码打包，以便读者可以通过阅读报告轻松查找代码。因此，代码应该有足够的注释，以便上述读者能够清楚地理解代码（以及您的报告）。

2. 报告：
   您的报告至少需要包含以下部分（可以在报告中包含一些代码片段，但仅用于帮助解释，而不是替代您的解释！）。
   1. 引言部分：讨论这份报告的内容以及目标读者、整体编译过程，最后是报告的组织方式。可以自由地在引言部分包含其他材料。
   2. 解析：词法和解析阶段，特别是如何生成抽象语法树（AST）。以及如何在解析阶段报告错误。
   3. 类型检查：如何执行类型检查，以及如何报告类型错误。在此过程中构建了哪些表格。
   4. 转换为中间表示（IR）：如何将AST转换为IR+，包括如何处理AST中的各种类型组件，以及构建的表格。
   5. 指令选择以生成四元组表示：如何将IR+转换为四元组，包括您使用的瓦片以及您使用的瓦片过程。您应该解释如何决定每种指令的“定义”和“使用”集合。
   6. 静态单赋值（SSA）：如何进行SSA（包括如何插入phi函数）。
   7. 四元组程序准备用于RPi，包括活跃性分析：如何准备四元组程序以进行最终的RPi（ARM）汇编转换，以及如何分析控制流图、活跃性、块流图和干扰图（即使代码由教师提供，也需要您的解释）。
   8. 寄存器分配：如何进行寄存器分配。您应该包括执行的步骤：简化、合并、冻结、溢出等，以及如何处理调用者/被调用者寄存器。您的代码需要能够处理0-9之间的任意数量的颜色（寄存器）（即，从0个寄存器到9个寄存器（r0-r8），r9-10保留用于溢出，r11-r15全部保留用于特殊用途）。
   9. RPi（ARM）汇编代码生成：如何生成最终的汇编代码，包括如何组织堆栈框架，包括如何处理“溢出”。您可以假设（1）每个方法最多只有3个参数，（2）最终汇编代码中出现的每个常量可以表示为imm8数字，（3）寄存器使用
   10. 最后，一个结论部分：简要总结您本学期所做的工作，并提供如何从您的源代码构建整个编译器以及如何使用编译器的说明（即，“用户手册”）。

   注意：（1）您的报告应该讨论您的代码如何完成上述所有内容，而不是课堂上或教科书中给出的理论！（2）在您的报告中，您必须至少使用一个示例FDMJ程序来解释每个步骤（可以使用多个示例）。也就是说，您的解释应该首先讨论如何完成该步骤（包括但不限于：使用的中间数据表和结构，以及使用的算法），以及如何将结构和算法应用于您的示例。例如，在解释解析步骤时，您应该说明您的解析器（而不是lex/yacc）如何工作，以及如何生成AST中的特定节点。您的示例FMDJ程序应该包含您上述解释所需的所有元素。您的报告的彻底性是评分考虑的一部分。

3. 代码：
   a. 您应该假设执行环境是本学期早些时候介绍的64位Ubuntu 20（或更高版本）Linux操作系统，x86架构，并且安装了所有提到的软件包（lex/yacc、make、cmake、qemu等）。
   b. 您可以自由组织您的代码（只要满足c下的要求），尽管建议您遵循课程中给出的代码结构。如果您在Cmakefiles和Makefiles方面遇到困难，可以随时联系教师和助教寻求帮助。
   c. 您的包的根目录必须有（1）一个makefile（见下文）和（2）一个README文件（告诉用户如何使用您的包），以及（3）一个“test”目录（其中包含所有测试FMJ源文件）。make命令应该接受以下四个指令：
      1. “make build”：构建编译器。
      2. “make compile”：编译测试目录中的每个FMJ源文件（并生成d下列出的所有输出文件）。
      3. “make run”：在寄存器分配和RPi汇编生成后，使用qemu模拟器执行RPi代码。

   d. 您构建的编译器（使用“make build”）必须在执行“make compile”指令时为“test”目录中的每个FMJ源文件输出以下所有文件（使用课堂上给出的打印代码）。
      1. 源代码（即，FMJ源代码的打印输出，但忽略格式和注释）
      2. 带有语义信息的AST树
      3. IR+树
      4. 来自IR+树的四元组程序
      5. SSA转换后的四元组程序
      6. 为RPi准备的四元组，以及颜色分配

   4.  最终的RPi汇编代码
   注意：上述是每个源文件的最小输出列表。确保输出文件的命名清晰易懂（建议使用本学期一直使用的命名约定）。可以打印更多的文件。
   注意：HW10中完成的优化对于您的最终报告是可选的。

4. 如何提交：
   b. 将您所有的代码（源）文件打包在一个目录下，作为一个（压缩的）tar文件，并在elearning上提交tar文件。
   c. 您的包应该包含上述报告的PDF格式。
   d. 在elearning上提交包。

5. 如何评分：
   a. 您的文档和程序将被阅读以判断它们的风格、彻底性和正确性。
   b. 打印输出将被阅读并与多个输入FDMJ程序一起执行，以判断您的代码的正确性。

---